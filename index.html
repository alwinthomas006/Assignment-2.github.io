<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employee Dashboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Custom styles for dashboard and form */
    body {
      background: #fcfcf9;
      color: #19343b;
      line-height: 1.5;
      font-family: Segoe UI, Tahoma, Geneva, Verdana, sans-serif;
    }
    .loading-overlay {
      position: fixed;
      top: 0; left: 0; width: 100vw; height: 100vh;
      background: rgba(255,255,255,0.95);
      display: none;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      z-index: 9999;
      backdrop-filter: blur(5px);
    }
    .loading-overlay.show { display: flex; }
    .page-container { display: none; min-height: calc(100vh - 76px); opacity: 0; transform: translateY(20px); transition: all 250ms cubic-bezier(0.16,1,0.3,1);}
    .page-container.active { display: block; opacity: 1; transform: translateY(0);}
    .employee-card {
      background: #fff;
      border-radius: 12px;
      padding: 18px;
      border: 1px solid #e0e0e0;
      box-shadow: 0 2px 6px rgba(21,50,61,0.08);
      margin-bottom: 18px;
      position: relative;
      transition: box-shadow 0.2s;
      height: 100%;
      cursor: pointer;
    }
    .employee-card:hover { box-shadow: 0 6px 16px rgba(33,128,141,0.13);}
    .employee-avatar {
      width: 58px; height: 58px; border-radius: 50%;
      background: linear-gradient(135deg, #21808d, #32b8c6);
      display: flex; align-items: center; justify-content: center;
      color: white; font-size: 18px; font-weight: bold; margin-bottom: 10px;
    }
    .employee-name { font-size: 17px; font-weight: 570; color: #19343b; margin-bottom: 6px;}
    .employee-email { color: #626c71; font-size: 13px; word-break: break-all;}
    .employee-id {
      position: absolute; top: 12px; right: 16px;
      background: #f3fafc; color: #21808d; padding: 2px 10px;
      border-radius: 15px; font-size: 13px; font-weight: 500;
    }
    .btn-check:checked + .btn-outline-primary { background-color: #21808d; border-color: #21808d;}
    .view-container { transition: all 250ms;}
    .list-group-item:hover {border-left: 4px solid #21808d; background-color: #f3fafc; transform: translateX(4px);}
    .employee-list-avatar {width:34px;height:34px;background:linear-gradient(135deg, #21808d, #32b8c6);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:13px;font-weight:600; margin-right:14px;}
    .table-hover tbody tr:hover {background-color:#f3fafc !important;transform:scale(1.01);}
    /* Responsive adjustments */
    @media (max-width:768px) {
      .employee-card {margin-bottom:12px;}
      .btn-group {flex-direction:column;width:100%;}
      .btn-group .btn {margin-bottom:8px;}
      .display-5 {font-size:1.8rem;}
    }
    /* Loading spinner */
    .spinner-border {width: 2.5rem; height: 2.5rem;}
    /* Animate classes */
    @keyframes fadeInUp { from {opacity: 0; transform: translateY(30px);} to { opacity: 1; transform: translateY(0);}}
    .animate-fade-in {animation: fadeInUp 0.5s cubic-bezier(0.16,1,0.3,1);}
    @keyframes slideInFromLeft {from {opacity:0; transform:translateX(-20px);} to{opacity:1; transform:translateX(0);}}
    .animate-slide-in {animation: slideInFromLeft 0.3s cubic-bezier(0.16,1,0.3,1);}
  </style>
</head>
<body>

  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="loading-overlay">
    <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div>
    <p class="mt-3 text-muted">Loading employees...</p>
  </div>

  <!-- Navigation Bar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
    <div class="container">
      <a class="navbar-brand" href="#dashboard" onclick="navigateTo('dashboard')">
        <i class="fas fa-users me-2"></i>Employee Dashboard
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link active" href="#dashboard" onclick="navigateTo('dashboard')" data-page="dashboard">
              <i class="fas fa-home me-1"></i>Dashboard
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#employee-form" onclick="navigateTo('employee-form')" data-page="employee-form">
              <i class="fas fa-plus-circle me-1"></i>Employee Form
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div id="app" class="main-content">

    <!-- Dashboard Page -->
    <div id="dashboard-page" class="page-container active">
      <div class="container py-4">
        <!-- Header Section -->
        <div class="row mb-4">
          <div class="col-12">
            <h1 class="display-5 mb-2">Employee Dashboard</h1>
            <p class="text-muted lead">Manage and view employee information</p>
          </div>
        </div>

        <!-- View Toggle Buttons -->
        <div class="row mb-4">
          <div class="col-12">
            <div class="card">
              <div class="card-body">
                <div class="d-flex justify-content-between align-items-center flex-wrap">
                  <div>
                    <h5 class="card-title mb-1">Employee List</h5>
                    <p class="text-muted mb-0">Choose your preferred view</p>
                  </div>
                  <div>
                    <div class="btn-group" role="group">
                      <input type="radio" class="btn-check" name="viewMode" id="tableView" value="table" checked>
                      <label class="btn btn-outline-primary" for="tableView"><i class="fas fa-table me-1"></i>Table</label>
                      <input type="radio" class="btn-check" name="viewMode" id="cardView" value="cards">
                      <label class="btn btn-outline-primary" for="cardView"><i class="fas fa-th-large me-1"></i>Cards</label>
                      <input type="radio" class="btn-check" name="viewMode" id="listView" value="list">
                      <label class="btn btn-outline-primary" for="listView"><i class="fas fa-list me-1"></i>List</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Employee Data Display -->
        <div class="row">
          <div class="col-12">
            <!-- Error Message -->
            <div id="errorMessage" class="alert alert-danger" style="display:none;">
              <i class="fas fa-exclamation-triangle me-2"></i>
              <span id="errorText">Failed to load employee data. Please try again.</span>
              <button class="btn btn-sm btn-outline-danger ms-2" onclick="loadEmployees()">
                <i class="fas fa-retry me-1"></i>Retry
              </button>
            </div>

            <!-- Table View -->
            <div id="tableViewContainer" class="view-container">
              <div class="card">
                <div class="card-body p-0">
                  <div class="table-responsive">
                    <table class="table table-hover mb-0">
                      <thead class="table-primary">
                        <tr>
                          <th scope="col">ID</th>
                          <th scope="col">Name</th>
                          <th scope="col">Email</th>
                        </tr>
                      </thead>
                      <tbody id="tableBody"></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

            <!-- Cards View -->
            <div id="cardsViewContainer" class="view-container" style="display:none;">
              <div id="cardsGrid" class="row g-4"></div>
            </div>

            <!-- List View -->
            <div id="listViewContainer" class="view-container" style="display:none;">
              <div class="card">
                <div class="card-body p-0">
                  <div id="listGroup" class="list-group list-group-flush"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Employee Form Page -->
    <div id="employee-form-page" class="page-container">
      <div class="container py-4">
        <!-- Header Section -->
        <div class="row mb-4">
          <div class="col-12">
            <h1 class="display-5 mb-2">Add New Employee</h1>
            <p class="text-muted lead">Fill out the form to add a new employee</p>
          </div>
        </div>
        <div class="row justify-content-center">
          <div class="col-lg-8 col-md-10">
            <!-- Employee Form -->
            <div class="card shadow">
              <div class="card-header bg-primary text-white">
                <h4 class="mb-0"><i class="fas fa-user-plus me-2"></i>Employee Information</h4>
              </div>
              <div class="card-body">
                <form id="employeeForm" novalidate>
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="employeeName" class="form-label">Name <span class="text-danger">*</span></label>
                      <input type="text" class="form-control" id="employeeName" placeholder="Enter employee name" required>
                      <div class="invalid-feedback">Please provide a valid name.</div>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="employeeDesignation" class="form-label">Designation <span class="text-danger">*</span></label>
                      <select class="form-select" id="employeeDesignation" required>
                        <option value="">Choose designation</option>
                        <option value="Software Engineer">Software Engineer</option>
                        <option value="Senior Software Engineer">Senior Software Engineer</option>
                        <option value="Team Lead">Team Lead</option>
                        <option value="Project Manager">Project Manager</option>
                        <option value="Business Analyst">Business Analyst</option>
                        <option value="QA Engineer">QA Engineer</option>
                        <option value="DevOps Engineer">DevOps Engineer</option>
                        <option value="UI/UX Designer">UI/UX Designer</option>
                        <option value="Data Analyst">Data Analyst</option>
                        <option value="HR Manager">HR Manager</option>
                      </select>
                      <div class="invalid-feedback">Please select a designation.</div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="employeeLocation" class="form-label">Location <span class="text-danger">*</span></label>
                      <input type="text" class="form-control" id="employeeLocation" placeholder="Enter location e.g., New York" required>
                      <div class="invalid-feedback">Please provide a valid location.</div>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="employeeSalary" class="form-label">Salary <span class="text-danger">*</span></label>
                      <div class="input-group"><span class="input-group-text">$</span>
                        <input type="number" class="form-control" id="employeeSalary" placeholder="Enter salary amount" min="1" required>
                      </div>
                      <div class="invalid-feedback">Please provide a valid salary amount.</div>
                    </div>
                  </div>
                  <div class="d-flex gap-2 justify-content-end">
                    <button type="button" class="btn btn-secondary" onclick="clearForm()"><i class="fas fa-times me-1"></i>Clear</button>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-save me-1"></i>Submit</button>
                  </div>
                </form>
                <div id="successMessage" class="alert alert-success mt-4" style="display:none;">
                  <i class="fas fa-check-circle me-2"></i>
                  <span id="successText">Employee added successfully!</span>
                </div>
              </div>
            </div>
            <!-- Submitted Employees List -->
            <div id="submittedEmployeesSection" class="mt-5" style="display:none;">
              <div class="card">
                <div class="card-header bg-success text-white">
                  <h5 class="mb-0"><i class="fas fa-list me-2"></i>Recently Added Employees</h5>
                </div>
                <div class="card-body p-0">
                  <div class="table-responsive">
                    <table class="table table-striped mb-0">
                      <thead>
                        <tr>
                          <th>Name</th>
                          <th>Designation</th>
                          <th>Location</th>
                          <th>Salary</th>
                        </tr>
                      </thead>
                      <tbody id="submittedEmployeesBody"></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript Application Logic -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Application state - stored in memory
    let appState = {
      employees: [],
      submittedEmployees: [],
      currentView: "table",
      isLoading: false
    };

    document.addEventListener('DOMContentLoaded', function () {
      initializeApp();
    });

    function initializeApp() {
      // Set up event listeners
      setupEventListeners();
      // Load initial data
      loadEmployees();
      // Set initial page
      navigateTo('dashboard');
    }

    function setupEventListeners() {
      // View mode toggle listeners
      const viewModeInputs = document.querySelectorAll('input[name="viewMode"]');
      viewModeInputs.forEach(function(input) {
        input.addEventListener('change', function() {
          if (this.checked) switchView(this.value);
        });
      });
      // Form submission listener
      const employeeForm = document.getElementById('employeeForm');
      employeeForm.addEventListener('submit', handleFormSubmission);

      // Form validation listeners
      const formInputs = employeeForm.querySelectorAll('input, select');
      formInputs.forEach(function(input) {
        input.addEventListener('blur', validateInput);
        input.addEventListener('input', clearValidation);
      });
    }

    // Navigation functions
    function navigateTo(page) {
      document.querySelectorAll('.page-container').forEach(function(container) {
        container.classList.remove('active');
      });
      const targetPage = document.getElementById(page + "-page");
      if (targetPage) targetPage.classList.add('active');
      updateNavigationActive(page);
    }
    function updateNavigationActive(currentPage) {
      document.querySelectorAll('.nav-link[data-page]').forEach(function(link) {
        link.classList.remove('active');
        if (link.getAttribute('data-page') === currentPage) link.classList.add('active');
      });
    }

    // API functions
    async function loadEmployees() {
      setLoading(true);
      hideError();
      try {
        const response = await fetch("https://jsonplaceholder.typicode.com/users");
        if (!response.ok) throw new Error("HTTP error! status " + response.status);
        const employees = await response.json();
        appState.employees = employees.map(emp => ({
          id: emp.id,
          name: emp.name,
          email: emp.email
        }));
        displayEmployees();
      } catch (error) {
        showError("Failed to load employee data. Please check your internet connection and try again.");
      } finally {
        setLoading(false);
      }
    }

    // Display employees based on view
    function displayEmployees() {
      if (appState.employees.length === 0) return;
      switch (appState.currentView) {
        case "table": displayTableView(); break;
        case "cards": displayCardsView(); break;
        case "list": displayListView(); break;
      }
    }

    function switchView(viewType) {
      appState.currentView = viewType;
      document.querySelectorAll('.view-container').forEach(function(container) {
        container.style.display = 'none';
      });
      const targetContainer = document.getElementById(viewType + "ViewContainer");
      if (targetContainer) targetContainer.style.display = 'block';
      displayEmployees();
    }

    function displayTableView() {
      const tableBody = document.getElementById('tableBody');
      tableBody.innerHTML = '';
      appState.employees.forEach(function(employee, index) {
        const row = document.createElement('tr');
        row.className = "animate-slide-in";
        row.style.animationDelay = (index * 0.05) + "s";
        row.innerHTML = `
          <td><strong>${employee.id}</strong></td>
          <td>
            <div class="d-flex align-items-center">
              <div class="employee-list-avatar me-2">${getInitials(employee.name)}</div>
              <span>${escapeHtml(employee.name)}</span>
            </div>
          </td>
          <td><i class="fas fa-envelope me-1 text-muted"></i> <span>${escapeHtml(employee.email)}</span></td>
        `;
        tableBody.appendChild(row);
      });
    }

    function displayCardsView() {
      const cardsGrid = document.getElementById('cardsGrid');
      cardsGrid.innerHTML = '';
      appState.employees.forEach(function(employee, index) {
        const col = document.createElement('div');
        col.className = "col-lg-4 col-md-6 col-sm-12 mb-4";
        const card = document.createElement('div');
        card.className = "employee-card animate-fade-in position-relative";
        card.style.animationDelay = (index * 0.1) + "s";
        card.innerHTML = `
          <div class="employee-id">${employee.id}</div>
          <div class="employee-avatar">${getInitials(employee.name)}</div>
          <div class="employee-name">${escapeHtml(employee.name)}</div>
          <div class="employee-email"><i class="fas fa-envelope me-1"></i> ${escapeHtml(employee.email)}</div>
        `;
        col.appendChild(card);
        cardsGrid.appendChild(col);
      });
    }

    function displayListView() {
      const listGroup = document.getElementById('listGroup');
      listGroup.innerHTML = '';
      appState.employees.forEach(function(employee, index) {
        const listItem = document.createElement('div');
        listItem.className = "list-group-item list-group-item-action animate-slide-in";
        listItem.style.animationDelay = (index * 0.05) + "s";
        listItem.innerHTML = `
          <div class="d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
              <div class="employee-list-avatar me-3">${getInitials(employee.name)}</div>
              <div>
                <h6 class="mb-1">${escapeHtml(employee.name)}</h6>
                <p class="mb-0 text-muted"><i class="fas fa-envelope me-1"></i> ${escapeHtml(employee.email)}</p>
              </div>
            </div>
            <span class="badge bg-primary rounded-pill">${employee.id}</span>
          </div>
        `;
        listGroup.appendChild(listItem);
      });
    }

    // Form handling functions
    function handleFormSubmission(event) {
      event.preventDefault();
      if (!validateForm()) return;
      const formData = {
        name: document.getElementById('employeeName').value.trim(),
        designation: document.getElementById('employeeDesignation').value,
        location: document.getElementById('employeeLocation').value.trim(),
        salary: parseInt(document.getElementById('employeeSalary').value),
        id: Date.now(),
        submittedAt: new Date().toISOString()
      };
      appState.submittedEmployees.push(formData);
      showSuccessMessage(`Employee ${formData.name} has been added successfully!`);
      clearForm();
      displaySubmittedEmployees();
    }

    function validateForm() {
      const form = document.getElementById('employeeForm');
      const inputs = form.querySelectorAll('input[required], select[required]');
      let isValid = true;
      inputs.forEach(function(input) {
        if (!validateInput({target: input})) isValid = false;
      });
      return isValid;
    }
    function validateInput(event) {
      const input = event.target;
      const value = input.value.trim();
      let isValid = true;
      let errorMessage = "";
      if (input.hasAttribute('required') && !value) {
        isValid = false; errorMessage = "This field is required.";
      }
      if (value) {
        switch (input.type) {
          case "text":
            if (value.length < 2) {isValid = false; errorMessage = "Must be at least 2 characters long.";}
            break;
          case "number":
            const numValue = parseInt(value);
            if (numValue <= 0) {isValid = false; errorMessage = "Must be a positive number.";}
            break;
        }
      }
      if (isValid) {
        input.classList.remove("is-invalid");
        input.classList.add("is-valid");
      } else {
        input.classList.remove("is-valid");
        input.classList.add("is-invalid");
      }
      const feedback = input.parentNode.querySelector('.invalid-feedback');
      if (feedback) feedback.textContent = errorMessage;
      return isValid;
    }
    function clearValidation(event) {
      const input = event.target;
      input.classList.remove("is-valid","is-invalid");
    }
    function clearForm() {
      const form = document.getElementById('employeeForm');
      form.reset();
      form.querySelectorAll('input, select').forEach(function(input){
        input.classList.remove("is-valid","is-invalid");
      });
      document.getElementById('successMessage').style.display = "none";
    }

    function displaySubmittedEmployees() {
      const section = document.getElementById('submittedEmployeesSection');
      const tbody = document.getElementById('submittedEmployeesBody');
      if (appState.submittedEmployees.length === 0) {
        section.style.display = 'none';
        return;
      }
      section.style.display = 'block';
      tbody.innerHTML = '';
      // Show most recent submissions first
      const recentEmployees = [...appState.submittedEmployees].reverse().slice(0,5);
      recentEmployees.forEach(function(employee, index){
        const row = document.createElement('tr');
        row.className = "animate-fade-in";
        row.style.animationDelay = (index * 0.1) + "s";
        row.innerHTML = `
          <td><strong>${escapeHtml(employee.name)}</strong></td>
          <td><span class="badge bg-info">${escapeHtml(employee.designation)}</span></td>
          <td><i class="fas fa-map-marker-alt me-1 text-muted"></i> ${escapeHtml(employee.location)}</td>
          <td><strong class="text-success">${employee.salary.toLocaleString()}</strong></td>
        `;
        tbody.appendChild(row);
      });
    }

    // Utility functions
    function getInitials(name) {
      return name.split(" ").map(word=>word.charAt(0).toUpperCase()).join("").substring(0,2);
    }
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
    function setLoading(isLoading) {
      appState.isLoading = isLoading;
      const loadingOverlay = document.getElementById('loadingOverlay');
      if (isLoading) loadingOverlay.classList.add("show");
      else loadingOverlay.classList.remove("show");
    }
    function showError(message) {
      const errorDiv = document.getElementById('errorMessage');
      const errorText = document.getElementById('errorText');
      errorText.textContent = message;
      errorDiv.style.display = "block";
      errorDiv.scrollIntoView({behavior:"smooth", block:"center"});
    }
    function hideError() {
      document.getElementById('errorMessage').style.display = "none";
    }
    function showSuccessMessage(message) {
      const successDiv = document.getElementById('successMessage');
      const successText = document.getElementById('successText');
      successText.textContent = message;
      successDiv.style.display = "block";
      successDiv.scrollIntoView({behavior:"smooth", block:"center"});
      setTimeout(()=>{successDiv.style.display="none";}, 5000);
    }

    // Browser hash navigation
    window.addEventListener('hashchange', function() {
      const hash = window.location.hash.substring(1);
      if (hash === "dashboard" || hash === "employee-form") navigateTo(hash);
    });
    window.addEventListener('load', function() {
      const hash = window.location.hash.substring(1);
      if (hash === "dashboard" || hash === "employee-form") navigateTo(hash);
    });
  </script>
</body>
</html>
